{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\manus\\\\Desktop\\\\Project-MyTown\\\\Project-MyTown-main\\\\client\\\\src\\\\components\\\\login.js\";\nimport axios from \"axios\";\nimport React, { Component } from \"react\";\nimport { connect } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst URL = \"http://localhost:3000/storeBlog\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      blog: '',\n      submitted: false,\n      registerSuccessful: false,\n      existUser: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.goToBlog = this.goToBlog.bind(this);\n  }\n\n  handleChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    this.setState({\n      [name]: value,\n      registerSuccessful: false,\n      existUser: false\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.setState({\n      submitted: true\n    });\n    const {\n      name,\n      blog\n    } = this.state;\n\n    if (name && blog) {\n      const userList = this.props.user;\n\n      if (!userList.includes(name)) {\n        this.props.dispatch({\n          type: \"REGISTERED\",\n          user: name\n        });\n        let payload = {\n          name: name,\n          blog: blog\n        };\n        axios.post(URL, payload).then(res => {\n          console.log(res.data);\n          this.setState({\n            registerSuccessful: true\n          });\n        });\n        e.target.reset();\n        this.setState({\n          name: \"\",\n          blog: \"\",\n          submitted: false\n        });\n      } else {\n        this.setState({\n          existUser: true\n        });\n      }\n    }\n  }\n\n  goToBlog() {\n    this.props.history.push(\"/blog\");\n  }\n\n  render() {\n    const {\n      submitted,\n      name,\n      blog,\n      registerSuccessful,\n      existUser\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row d-flex justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-10 col-md-6 col-lg-4 mt-5 login-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          name: \"form\",\n          onSubmit: this.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: 'form-group' + (submitted && !name ? ' has-error' : ''),\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"name\",\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              name: \"name\",\n              value: this.props.name,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 25\n            }, this), submitted && !name && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"help-block\",\n              children: \"Name is required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: 'form-group' + (submitted && !blog ? ' has-error' : ''),\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"Blog\",\n              children: \"Blog\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              rows: \"5\",\n              cols: \"50\",\n              className: \"form-control\",\n              name: \"blog\",\n              value: blog,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 25\n            }, this), submitted && !blog && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"help-block\",\n              children: \"Field is required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group d-flex justify-content-between\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                name: \"register\",\n                children: \"Register\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 25\n              }, this), registerSuccessful && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"success\",\n                children: \"Registered Successful\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 29\n              }, this), existUser && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-danger\",\n                children: \"User already exist\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger w-50\",\n            onClick: this.goToBlog,\n            children: \"Read the blogs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.user\n});\n\nexport default connect(mapStateToProps)(Login);","map":{"version":3,"sources":["C:/Users/manus/Desktop/Project-MyTown/Project-MyTown-main/client/src/components/login.js"],"names":["axios","React","Component","connect","URL","Login","constructor","props","state","name","blog","submitted","registerSuccessful","existUser","handleChange","bind","handleSubmit","goToBlog","e","value","target","setState","preventDefault","userList","user","includes","dispatch","type","payload","post","then","res","console","log","data","reset","history","push","render","mapStateToProps"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { Component } from \"react\"\nimport {connect} from 'react-redux'\n\nconst URL = \"http://localhost:3000/storeBlog\"\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            name: '',\n            blog:'',\n            submitted: false,\n            registerSuccessful: false,\n            existUser:false\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.goToBlog = this.goToBlog.bind(this);\n    }\n\n    handleChange(e) {\n\n        const { name, value } = e.target;\n        this.setState({ [name]: value , registerSuccessful : false,existUser:false });\n    }\n\n    handleSubmit(e) {\n            e.preventDefault();\n            this.setState({ submitted: true});\n            const {name, blog } = this.state;\n            if (name && blog) {\n                const userList = this.props.user;\n\n                if(!userList.includes(name)){\n                \n\n                    this.props.dispatch({\n                        type:\"REGISTERED\",\n                        user:name\n                    })\n                    let payload = {\n                        name : name,\n                        blog:blog\n                    }\n                    axios.post(URL, payload).then(res =>{\n                        console.log(res.data)\n                        this.setState({registerSuccessful:true})\n                    })\n                    e.target.reset();\n                   this.setState({name:\"\",blog:\"\",submitted:false})\n                }else{\n                    this.setState({existUser:true})\n                }\n               \n            }\n    }\n\n    goToBlog(){\n        this.props.history.push(\"/blog\")\n    }\n\n    render() {\n\n        const {submitted, name, blog, registerSuccessful,existUser} = this.state;\n\n        return (\n            <div className=\"row d-flex justify-content-center\">\n                <div className=\"col-sm-10 col-md-6 col-lg-4 mt-5 login-wrapper\">\n               <form name=\"form\" onSubmit={this.handleSubmit}>\n                    <div className={'form-group' + (submitted && !name ? ' has-error' : '')}>\n                        <label htmlFor=\"name\">Name</label>\n                        <input type=\"text\" className=\"form-control\" name=\"name\" value={this.props.name} onChange={this.handleChange} />\n                        {submitted && !name &&\n                            <div className=\"help-block\">Name is required</div>\n                        }\n                    </div>\n                 \n                    <div className={'form-group' + (submitted && !blog ? ' has-error' : '')}>\n                        <label htmlFor=\"Blog\">Blog</label>\n                        <textarea rows=\"5\" cols=\"50\" className=\"form-control\" name=\"blog\" value={blog} onChange={this.handleChange} ></textarea>    \n                        {submitted && !blog &&\n                            <div className=\"help-block\">Field is required</div>\n                        }\n                    </div>\n                    <div className=\"form-group d-flex justify-content-between\">\n                        <div>\n                        <button className=\"btn btn-primary\" name=\"register\">Register</button>\n                        {registerSuccessful &&\n                            <p className=\"success\">Registered Successful</p>}\n                             {existUser &&\n                            <p className=\"text-danger\">User already exist</p>}\n                        </div>\n\n                    </div>\n                </form>\n                <div className=\"d-flex justify-content-center\">\n                    <button className=\"btn btn-danger w-50\" onClick={this.goToBlog}>Read the blogs</button>\n                    </div>\n                </div>   \n\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state =>({\n    user : state.user\n})\n\n\nexport default connect(mapStateToProps)(Login);"]},"metadata":{},"sourceType":"module"}